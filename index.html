<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouncing Images</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 50%, #16a085 100%);
            height: 100vh;
            width: 100vw;
            font-family: Arial, sans-serif;
            touch-action: none;
        }

        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .bouncing-image {
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            animation: spin 3s infinite linear;
            will-change: transform;
            cursor: pointer;
            background: white;
        }

        .bouncing-image img {
            width: 60%;
            height: 60%;
            object-fit: contain;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @media (min-width: 768px) {
            .bouncing-image {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container"></div>

    <script>
        const container = document.querySelector('.container');
        const bouncers = [];
        const imageSize = window.innerWidth < 768 ? 120 : 150;
        const colors = ['#FF6B6B', '#F9CA24', '#6C5CE7', '#FDCB6E', '#00B894', '#E84393', '#0984E3', '#4ECDC4'];
        
        function getRandomVelocity() {
            const speed = 2 + Math.random() * 4;
            const angle = Math.random() * Math.PI * 2;
            return {
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed
            };
        }

        function createBouncer(x = null, y = null) {
            const el = document.createElement('div');
            el.className = 'bouncing-image';
            
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            el.style.background = randomColor;
            
            const img = document.createElement('img');
            img.src = 'https://dumb.at/Sam.png';
            img.alt = 'Sam';
            img.onerror = function() {
                // If image fails, show emoji fallback
                el.style.display = 'flex';
                el.style.alignItems = 'center';
                el.style.justifyContent = 'center';
                el.style.fontSize = '60px';
                el.textContent = 'ðŸŽ¨';
            };
            
            el.appendChild(img);
            container.appendChild(el);

            const velocity = getRandomVelocity();
            const bouncer = {
                element: el,
                x: x !== null ? x : Math.random() * (window.innerWidth - imageSize),
                y: y !== null ? y : Math.random() * (window.innerHeight - imageSize),
                vx: velocity.vx,
                vy: velocity.vy,
                size: imageSize
            };

            bouncers.push(bouncer);

            el.addEventListener('mousedown', (e) => handleImageInteraction(e, bouncer));
            el.addEventListener('touchstart', (e) => handleImageInteraction(e, bouncer));

            return bouncer;
        }

        function handleImageInteraction(e, bouncer) {
            e.stopPropagation();
            
            const rect = bouncer.element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            let clickX, clickY;
            if (e.type === 'touchstart') {
                clickX = e.touches[0].clientX;
                clickY = e.touches[0].clientY;
            } else {
                clickX = e.clientX;
                clickY = e.clientY;
            }
            
            const dx = centerX - clickX;
            const dy = centerY - clickY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance > 0) {
                const force = 8;
                bouncer.vx = (dx / distance) * force;
                bouncer.vy = (dy / distance) * force;
            }
        }

        // Create initial bouncers
        const initialCount = window.innerWidth < 768 ? 5 : 7;
        for (let i = 0; i < initialCount; i++) {
            setTimeout(() => {
                createBouncer();
            }, i * 200);
        }

        function animate() {
            bouncers.forEach(b => {
                b.x += b.vx;
                b.y += b.vy;

                if (b.x <= 0) {
                    b.x = 0;
                    b.vx = Math.abs(b.vx);
                } else if (b.x >= window.innerWidth - b.size) {
                    b.x = window.innerWidth - b.size;
                    b.vx = -Math.abs(b.vx);
                }

                if (b.y <= 0) {
                    b.y = 0;
                    b.vy = Math.abs(b.vy);
                } else if (b.y >= window.innerHeight - b.size) {
                    b.y = window.innerHeight - b.size;
                    b.vy = -Math.abs(b.vy);
                }

                b.element.style.left = b.x + 'px';
                b.element.style.top = b.y + 'px';
            });

            for (let i = 0; i < bouncers.length; i++) {
                for (let j = i + 1; j < bouncers.length; j++) {
                    const b1 = bouncers[i];
                    const b2 = bouncers[j];
                    
                    const dx = (b1.x + b1.size / 2) - (b2.x + b2.size / 2);
                    const dy = (b1.y + b1.size / 2) - (b2.y + b2.size / 2);
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const minDistance = b1.size * 0.9;
                    
                    if (distance < minDistance && distance > 0) {
                        const nx = dx / distance;
                        const ny = dy / distance;
                        
                        const overlap = minDistance - distance;
                        const separateX = nx * overlap * 0.5;
                        const separateY = ny * overlap * 0.5;
                        
                        b1.x += separateX;
                        b1.y += separateY;
                        b2.x -= separateX;
                        b2.y -= separateY;
                        
                        const dvx = b1.vx - b2.vx;
                        const dvy = b1.vy - b2.vy;
                        const dotProduct = dvx * nx + dvy * ny;
                        
                        if (dotProduct > 0) {
                            const bounce = 0.8;
                            b1.vx -= dotProduct * nx * bounce;
                            b1.vy -= dotProduct * ny * bounce;
                            b2.vx += dotProduct * nx * bounce;
                            b2.vy += dotProduct * ny * bounce;
                        }
                    }
                }
            }

            requestAnimationFrame(animate);
        }

        animate();

        container.addEventListener('click', (e) => {
            if (e.target === container) {
                const rect = container.getBoundingClientRect();
                createBouncer(
                    e.clientX - rect.left - imageSize / 2,
                    e.clientY - rect.top - imageSize / 2
                );
            }
        });

        container.addEventListener('touchstart', (e) => {
            if (e.target === container) {
                const rect = container.getBoundingClientRect();
                const touch = e.touches[0];
                createBouncer(
                    touch.clientX - rect.left - imageSize / 2,
                    touch.clientY - rect.top - imageSize / 2
                );
            }
        });
    </script>
</body>
</html>
